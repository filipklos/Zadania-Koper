function setCookie(e,t,n=30){const i=new Date;i.setTime(i.getTime()+864e5*n);let o="expires="+i.toUTCString();document.cookie=e+"="+t+";"+o+";path=/"}function getCookie(e){let t=e.length,n=document.cookie,i=n.indexOf(e);if(i<0)return null;i+=t+1;let o=n.indexOf(";",i);return o<0?n.substring(i):n.substring(i,o)}function addEvent(e,t,n){let i=document.querySelectorAll(e);null!=i&&i.forEach(e=>{e.addEventListener(t,n)})}function showHideElement(e){addEvent('select[name="'+e+'"]',"change",function(){let t=document.querySelector(".form-div#form-div-"+e),n=document.querySelector(".form-div#form-div-"+e+" > input"),i=document.querySelector(".form-div#form-div-"+e+" + span");1==this.selectedIndex?(t.classList.remove("hide"),null!=i&&i.classList.remove("hide"),n.setAttribute("type","text")):(t.classList.add("hide"),null!=i&&i.classList.add("hide"),n.setAttribute("type","hidden"));let o=document.querySelector(".form-file-div");"group"==e&&null!=o&&this.selectedIndex<2&&o.classList.add("hide")})}function checkAll(e,t){t.forEach(t=>t.checked=e.checked)}function check(e,t){let n=!0;e.forEach(function(e){e.checked||(n=!1)}),document.querySelector(t).checked=n}function autoGrow(e,t=!1,n=150,i=2){e.scrollHeight>n-2*i&&(t&&(e.style.height="0"),e.style.height=(e.scrollHeight+2*i).toString()+"px")}window.onload=function(){setTimeout(function(){let e=document.querySelector(".alert.green:not(.stamp)");null!=e&&e.classList.add("area")},5e3),addEvent(".filter","click",function(){document.querySelector(".area").classList.toggle("show-area"),document.querySelector(".roll").classList.toggle("reverse");let e=getCookie("roll");setCookie("roll",null!==e?"1"==e?0:1:0)}),addEvent('input[type="radio"], input[type="file"]',"change",function(){this.form.submit()}),elements=document.querySelectorAll(".task-title-header"),null!=elements&&elements.forEach(e=>{addEvent(".task-title-header .del-task","click",function(){let t=e.querySelector("h2").innerHTML,n=e.querySelector("span.id").innerHTML;confirm('Czy na pewno chcesz usunąć zadanie "'+t+'"?')&&(location.href="del.php?id="+n)})}),addEvent(".form-file-div .button.tile","click",function(){let e=this.getAttribute("id"),t=document.querySelector("#fs"+e).innerHTML,n=document.querySelector('input[name="del"]');confirm('Czy na pewno chcesz usunąć plik "'+t+'"?')&&(n.setAttribute("value",e),document.querySelector('input[type="file"]').setAttribute("type","hidden"),n.form.submit())}),addEvent(".form-answers-div .button.tile","click",function(){let e=this.getAttribute("id"),t=document.querySelector('input[name="del_ans"]');t.setAttribute("value",e),t.form.submit()}),showHideElement("category"),showHideElement("group"),addEvent('select[name="group"]',"change",function(){this.selectedIndex>1&&(document.querySelector('input[type="file"]').setAttribute("type","hidden"),this.form.submit())}),addEvent(".add-button .button.longer","click",function(){this.classList.add("hide"),document.querySelector(".form-div.add-task").classList.remove("hide")}),addEvent(".form-action","click",function(){let e=document.querySelector("form#users_data");e.action=this.id,e.submit()});let e=document.querySelectorAll("input.option-select");addEvent("input#option-all","change",function(){checkAll(this,e)}),addEvent(".option-select","change",function(){check(e,"input#option-all")}),addEvent("textarea","input",function(){autoGrow(this,!0)}),addEvent("textarea[readonly]","click",function(){document.querySelector('form.answer input[type="submit"]').click()}),addEvent(".send","click",function(){let e=document.querySelector('input[name="send"]');confirm("Czy chcesz oznaczyć to zadanie jako zrobione?")?e.setAttribute("checked","true"):e.removeAttribute("checked")}),addEvent(".print","click",function(){let e=confirm("Czy chcesz załączyć obrazki?")?"":"&img=no";window.open("print.php?"+this.getAttribute("data-param")+e)})};